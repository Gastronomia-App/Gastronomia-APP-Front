<section class="page">
  <header class="page__header">
    <h1>Empleados</h1>

    <div class="search">
      <input
        type="text"
        placeholder="Buscar por nombre, apellido, usuario o DNI..."
        [(ngModel)]="q"
        (input)="applyFilter()"
      />
      <button type="button" (click)="resetFilter()">Limpiar</button>
      <button type="button" (click)="load()">Refrescar</button>
    </div>
  </header>

  <div *ngIf="loading" class="state state--loading">
    Cargando empleados…
  </div>

  <div *ngIf="!loading && errorMsg" class="state state--error">
    {{ errorMsg }}
    <button type="button" (click)="load()">Reintentar</button>
  </div>

  <div *ngIf="!loading && !errorMsg && filtered.length === 0" class="state state--empty">
    No hay empleados.
  </div>

  <div *ngIf="!loading && !errorMsg && filtered.length > 0" class="table-wrap">
    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Usuario</th>
          <th>Rol</th>
          <th>DNI</th>
          <th>Teléfono</th>
          <th>Email</th>
          <th>Estado</th>
          <th>BusinessId</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let e of filtered">
          <td>{{ e.id }}</td>
          <td>{{ e.name }}</td>
          <td>{{ e.lastname }}</td>
          <td>{{ e.username }}</td>
          <td>{{ e.role }}</td>
          <td>{{ e.dni }}</td>
          <td>{{ e.phoneNumber }}</td>
          <td>{{ e.email }}</td>
          <td>
            <span [class.badge-active]="isActive(e)" [class.badge-inactive]="!isActive(e)">
              {{ isActive(e) ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td>{{ e.businessId }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>